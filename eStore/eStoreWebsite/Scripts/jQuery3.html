<!DOCTYPE html>
<html lang="en">
<head>
    <link href="../Content/bootstrap.min.css" rel="stylesheet" />
    <link href="../Content/jQueryExercises.css" rel="stylesheet" />
    <title>jQuery Exercise #3</title>
</head>
<body>
    <div class="row" style="left:10%;position:relative;">
        <h4>jQuery 3 - Dynamic table with data</h4>
        <div class="col-xs-7 col-sm-4 col-md-3 col-lg-2 ">
            <div class="table-bordered">
                <span>ID</span>
                <span>First</span>
                <span>Surname</span>
            </div>
            <div class="table-bordered">
                <div class="line">
                    <span id="SomeID">1.</span>
                    <span id="FirstName">George</span>
                    <span id="LastName">Jetson</span>
                </div>
                <div class="line">
                    <span id="SomeID">2.</span>
                    <span id="FirstName">Jane&nbsp;&nbsp;</span>
                    <span id="LastName">Jetson</span>
                </div>
                <div class="line">
                    <span id="SomeID">3.</span>
                    <span id="FirstName">Elroy&nbsp;</span>
                    <span id="LastName">Jetson</span>
                </div>
            </div>
            <div class="col-lg-12">
                <a href="jQuery2.html">Previous</a>
            </div>
            <div class="col-lg-12">
                <a href="jQuery4.html">Next</a>
            </div>
        </div>
    </div>
    <script src="../Scripts/jquery-2.1.4.min.js"></script>
    <script type="text/javascript">

        $(function () {

            var tbl = $('<table>').addClass('dynaTable');
            var oldLine;
            var last;
            var span;
            var first;

            $('span').on('click', function () {
                span = $(this);
                if (span.attr('id') == 'SomeID') // only the id spans work
                {
                    $(oldLine).toggleClass('itemSelected');
                    span.parent().addClass('itemSelected');
                    oldLine = span.parent();
                    first = span.next();
                    last = first.next();
                    tableBuilder(tbl, span.text(), first.text(), last.text())
                }
                else
                {
                    alert('Click on the number under ID!')
                }
            });

        }); // main jQuery function


        function tableBuilder(tbl, id, first, last) {  // rows based on passed int

            // delete rows from old table (if it exists)
            $(tbl).find('tr').remove();

            var tr = $('<tr>');

            var td = $('<td>');
            td.text('ID: ' + id);
            td.addClass('defItem');
            td.css('border', 'inset 1px');
            td.appendTo(tr); // add cell to table

            var td = $('<td>');
            td.text('First: ' + first);
            td.addClass('defItem');
            td.css('border', 'inset 1px');
            td.appendTo(tr); // add cell to table

            var td = $('<td>');
            td.text('Surname: ' + last);
            td.addClass('defItem');
            td.css('border', 'inset 1px');
            td.appendTo(tr); // add cell to table

            tr.appendTo(tbl);  // add row to table
            $('body').append(tbl); // add table to body
        }

    </script>
</body>
</html>
